"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const socket_io_1 = __importDefault(require("socket.io"));
const Server_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/Server"));
const Logger_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/Logger"));
class Ws {
    constructor() {
        this.isReady = false;
    }
    async start() {
        this.io = new socket_io_1.default.Server(Server_1.default.instance, {
            cors: {
                origin: '*',
            },
        });
        this.io.on('connection', async (socket) => {
            Logger_1.default.info(`new connection: ${socket.id}`);
            socket.on('disconnect', () => {
                Logger_1.default.info('socket disconnected');
            });
        });
        this.isReady = true;
        Logger_1.default.info('socket is ready');
    }
}
exports.default = new Ws();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJXcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLDBEQUFnQztBQUNoQyxzRkFBNEM7QUFDNUMsc0ZBQTRDO0FBRTVDLE1BQU0sRUFBRTtJQUFSO1FBQ1csWUFBTyxHQUFHLEtBQUssQ0FBQTtJQXNCMUIsQ0FBQztJQW5CVSxLQUFLLENBQUMsS0FBSztRQUNkLElBQUksQ0FBQyxFQUFFLEdBQUcsSUFBSSxtQkFBUSxDQUFDLE1BQU0sQ0FBQyxnQkFBTSxDQUFDLFFBQVMsRUFBRTtZQUM1QyxJQUFJLEVBQUU7Z0JBQ0YsTUFBTSxFQUFFLEdBQUc7YUFDZDtTQUNKLENBQUMsQ0FBQTtRQUdGLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxLQUFLLEVBQUMsTUFBTSxFQUFDLEVBQUU7WUFDcEMsZ0JBQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFBO1lBRzNDLE1BQU0sQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTtnQkFDekIsZ0JBQU0sQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQTtZQUN0QyxDQUFDLENBQUMsQ0FBQTtRQUNOLENBQUMsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUE7UUFDbkIsZ0JBQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0NBQ0o7QUFHRCxrQkFBZSxJQUFJLEVBQUUsRUFBRSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNvY2tldElvIGZyb20gJ3NvY2tldC5pbydcclxuaW1wb3J0IFNlcnZlciBmcm9tICdAaW9jOkFkb25pcy9Db3JlL1NlcnZlcidcclxuaW1wb3J0IExvZ2dlciBmcm9tICdAaW9jOkFkb25pcy9Db3JlL0xvZ2dlcidcclxuXHJcbmNsYXNzIFdzIHtcclxuICAgIHB1YmxpYyBpc1JlYWR5ID0gZmFsc2VcclxuICAgIHB1YmxpYyBpbzogc29ja2V0SW8uU2VydmVyXHJcblxyXG4gICAgcHVibGljIGFzeW5jIHN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuaW8gPSBuZXcgc29ja2V0SW8uU2VydmVyKFNlcnZlci5pbnN0YW5jZSEsIHtcclxuICAgICAgICAgICAgY29yczoge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luOiAnKicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gbmV3IHNvY2tldCBjb25uZWN0aW9uIGV2ZW50XHJcbiAgICAgICAgdGhpcy5pby5vbignY29ubmVjdGlvbicsIGFzeW5jIHNvY2tldCA9PiB7XHJcbiAgICAgICAgICAgIExvZ2dlci5pbmZvKGBuZXcgY29ubmVjdGlvbjogJHtzb2NrZXQuaWR9YClcclxuXHJcbiAgICAgICAgICAgIC8vIHNvY2tldCBldmVudHNcclxuICAgICAgICAgICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgTG9nZ2VyLmluZm8oJ3NvY2tldCBkaXNjb25uZWN0ZWQnKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZVxyXG4gICAgICAgIExvZ2dlci5pbmZvKCdzb2NrZXQgaXMgcmVhZHknKVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBUaGlzIG1ha2VzIHRoZSBzZXJ2aWNlIGEgc2luZ2xldG9uXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBXcygpXHJcbiJdfQ==